(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{64:function(t,e,c){"use strict";c.r(e),c.d(e,"Context",(function(){return S}));var n=c(0),i=c(16),s=c.n(i),r=c(23),o=c(6),a=c(72),l=c(66),u=c(20),d=c(28),j=c(1),b=Object(u.a)((function(){var t=Object(n.useContext)(S).FruitShopStore;return Object(n.useEffect)((function(){t.setTotalBasketPrice()}),[t.basket,t]),Object(j.jsxs)(a.a,{className:"d-flex justify-content-center m-4",style:{width:300,border:"1px solid grey"},children:[Object(j.jsx)("h1",{className:"d-flex justify-content-center",children:"\u041c\u043e\u044f \u043a\u043e\u0440\u0437\u0438\u043d\u0430"}),t.basket.map((function(e){return Object(j.jsxs)(a.a.Item,{className:"d-flex justify-content-between",style:{fontSize:"25px"},children:[e.name," - ",e.counterKilo,"\u043a\u0433 - ",e.price,"$",Object(j.jsx)(l.a,{className:"btn btn-light ",onClick:function(){return t.removeBasketItem(e.id)},children:Object(j.jsx)(d.a,{})})]},e.id)})),Object(j.jsxs)(l.a,{className:"btn btn-success",children:[" ","\u041a\u0443\u043f\u0438\u0442\u044c \u0437\u0430 ",t.totalBasketPrice,"$"]})]})})),h=c(68),f=c(71),m=c(67),x=Object(u.a)((function(t){var e=t.fruit,c=t.index,i=Object(n.useContext)(S).FruitShopStore;return Object(n.useEffect)((function(){i.setTotalPrice(c)}),[e.counterKilo,c,i]),Object(j.jsxs)(f.a,{style:{width:155,border:"1px solid grey"},className:"ml-2",children:[Object(j.jsx)(m.a,{width:150,height:150,src:e.img}),Object(j.jsxs)(h.a,{className:"d-flex flex-column ",children:[Object(j.jsx)(f.a.Title,{className:"border-top d-flex justify-content-center",children:e.name}),Object(j.jsxs)(f.a.Subtitle,{className:"mb-2 pb-2 text-muted  d-flex justify-content-center border-bottom",children:[" ",e.price," $/\u043a\u0433",e.discount?" ".concat(e.discount," $/").concat(e.discountWeight," \u043a\u0433"):null," "]})]}),Object(j.jsxs)(f.a.Title,{className:"d-flex justify-content-center border-bottom",style:{fontSize:"30px"},children:[Object(j.jsxs)(l.a,{className:"btn btn-light",onClick:function(){return i.increment(c)},children:[" ",Object(j.jsx)(d.c,{})]}),e.counterKilo," \u043a\u0433",Object(j.jsxs)(l.a,{className:"btn btn-light",onClick:function(){return i.decrement(c)},children:[" ",Object(j.jsx)(d.b,{})]})]}),Object(j.jsxs)(f.a.Title,{className:"d-flex flex-column  ",children:[Object(j.jsx)("div",{className:"d-flex justify-content-center",children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(j.jsxs)("div",{className:"d-flex justify-content-center",children:[e.totalPrice,"$"]})]}),Object(j.jsx)(l.a,{className:"btn btn-success",onClick:function(){return i.setBasket(e.id)},disabled:0===e.counterKilo,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})})),p=Object(u.a)((function(){var t=Object(n.useContext)(S).FruitShopStore;return Object(j.jsx)(h.a,{className:"d-flex justify-content-start m-2",children:t.fruits.map((function(t,e){return Object(j.jsx)(x,{fruit:t,index:e},t.id)}))})})),O="/basket",k=[{path:"/",Component:p},{path:O,Component:b}];var g=function(){return Object(j.jsxs)(o.d,{children:[k.map((function(t,e){var c=t.path,n=t.Component;return Object(j.jsx)(o.b,{path:c,component:n,exact:!0},e)})),Object(j.jsx)(o.a,{to:"/"})]})},v=c(69),y=c(70),K=Object(u.a)((function(){var t=Object(o.g)();return Object(j.jsx)(v.a,{bg:"dark",variant:"dark",children:Object(j.jsxs)(h.a,{children:[Object(j.jsx)(r.b,{style:{color:"white"},to:"/",children:"\u041e\u0412\u041e\u0429\u0418\u0411\u0410\u0417\u0410"}),Object(j.jsx)(y.a,{className:"ml-auto",style:{color:"white"},children:Object(j.jsx)(l.a,{variant:"outline-light",className:"ml-2",onClick:function(){return t.push(O)},children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"})})]})})}));var _=function(){return Object(j.jsxs)(r.a,{children:[Object(j.jsx)(K,{}),Object(j.jsx)(g,{})]})},N=c(47),P=c(48),C=c(7),B=function(){function t(){Object(N.a)(this,t),this._fruits=[{id:1,name:"\u0411\u0430\u043d\u0430\u043d",price:10,discount:null,discountWeight:null,img:"https://m.dom-eda.com/uploads/images/catalog/item/7e6fd19d46/0c87fefc9a_100crop.jpg",counterKilo:0,totalPrice:0},{id:2,name:"\u042f\u0431\u043b\u043e\u043a\u043e",price:8,discount:null,discountWeight:null,img:"https://m.dom-eda.com/uploads/images/catalog/item/86df51de21/c25c94fe96_100crop.jpg",counterKilo:0,totalPrice:0},{id:3,name:"\u041f\u0430\u043f\u0430\u044f",price:10,discount:25,discountWeight:3,img:"https://m.dom-eda.com/uploads/images/catalog/item/b230c322da/ea073f8b3b_100crop.jpg",counterKilo:0,totalPrice:0}],this._basket=[],this._totalBasketPrice=0,Object(C.d)(this)}return Object(P.a)(t,[{key:"setTotalBasketPrice",value:function(){var t=0;this._basket.map((function(e){return t+=e.price})),this._totalBasketPrice=t}},{key:"increment",value:function(t){var e=this._fruits[t];e.counterKilo=e.counterKilo+1}},{key:"decrement",value:function(t){var e=this._fruits[t];e.counterKilo>0?e.counterKilo=e.counterKilo-1:e.counterKilo=0}},{key:"removeBasketItem",value:function(t){this._basket=this._basket.filter((function(e){return e.id!==t}))}},{key:"setDiscount",value:function(t,e){var c=this._fruits[t],n=c.price,i=c.discount,s=c.discountWeight;return Math.floor(e/s)*i+e%s*n}},{key:"setBasket",value:function(t){var e=this._basket.findIndex((function(e){return e.id===t})),c=t-1,n=this._basket[e],i=this._fruits[c];if(-1!==e)n.counterKilo=n.counterKilo+i.counterKilo,n.price=i.discount&&n.counterKilo>=i.discountWeight?this.setDiscount(c,n.counterKilo):n.price+i.totalPrice;else{var s={name:i.name,price:i.totalPrice,counterKilo:i.counterKilo,id:i.id};this._basket.push(s)}i.counterKilo=0,i.totalPrice=0}},{key:"setTotalPrice",value:function(t){var e=this._fruits[t],c=e.price,n=e.discount,i=e.discountWeight,s=e.counterKilo;e.totalPrice=n&&s>=i?this.setDiscount(t,s):c*s}},{key:"basket",get:function(){return this._basket}},{key:"fruits",get:function(){return this._fruits}},{key:"totalBasketPrice",get:function(){return this._totalBasketPrice}}]),t}(),S=Object(n.createContext)(null);s.a.render(Object(j.jsx)(S.Provider,{value:{FruitShopStore:new B},children:Object(j.jsx)(_,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.a6019ea4.chunk.js.map