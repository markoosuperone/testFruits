(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{64:function(t,e,i){"use strict";i.r(e),i.d(e,"Context",(function(){return T}));var c=i(0),n=i(16),s=i.n(n),r=i(23),o=i(6),a=i(75),l=i(67),u=i(20),d=i(28),j=i(1),b=Object(u.a)((function(){var t=Object(c.useContext)(T).FruitShopStore;return Object(c.useEffect)((function(){t.setTotalBasketPrice()}),[t.basket,t]),Object(j.jsxs)(a.a,{className:"d-flex justify-content-center m-4",style:{width:300,border:"1px solid grey"},children:[Object(j.jsx)("h1",{className:"d-flex justify-content-center",children:"\u041c\u043e\u044f \u043a\u043e\u0440\u0437\u0438\u043d\u0430"}),t.basket.map((function(e){return Object(j.jsxs)(a.a.Item,{className:"d-flex justify-content-between",style:{fontSize:"25px"},children:[e.name," - ",e.counterKilo,"\u043a\u0433 - ",e.price,"$",Object(j.jsx)(l.a,{className:"btn btn-light ",onClick:function(){return t.removeBasketItem(e.id)},children:Object(j.jsx)(d.a,{})})]},e.id)})),Object(j.jsxs)(l.a,{className:"btn btn-success",children:[" ","\u041a\u0443\u043f\u0438\u0442\u044c \u0437\u0430 ",t.totalBasketPrice,"$"]})]})})),f=i(70),h=i(74),m=i(68),x=i(69),O=Object(u.a)((function(t){var e=t.fruit,i=Object(c.useContext)(T).FruitShopStore;return Object(c.useEffect)((function(){i.setTotalPrice(e.id)}),[e.counterKilo,e.id,i]),Object(j.jsxs)(h.a,{style:{width:155,border:"1px solid grey"},className:"ml-2",children:[Object(j.jsx)(m.a,{width:150,height:150,src:e.img}),Object(j.jsxs)(x.a,{className:"d-flex flex-column ",children:[Object(j.jsx)(h.a.Title,{className:"border-top d-flex justify-content-center",children:e.name}),Object(j.jsxs)(h.a.Subtitle,{className:"mb-2 pb-2 text-muted  d-flex justify-content-center border-bottom",children:[" ",e.price," $/\u043a\u0433",e.discount?" ".concat(e.discount," $/").concat(e.discountWeight," \u043a\u0433"):null," "]})]}),Object(j.jsxs)(h.a.Title,{className:"d-flex justify-content-center border-bottom",style:{fontSize:"40px"},children:[Object(j.jsxs)(l.a,{className:"btn btn-light",onClick:function(){return i.increment(e.id)},children:[" ",Object(j.jsx)(d.c,{})]}),e.counterKilo," \u043a\u0433",Object(j.jsxs)(l.a,{className:"btn btn-light",onClick:function(){return i.decrement(e.id)},children:[" ",Object(j.jsx)(d.b,{})]})]}),Object(j.jsxs)(h.a.Title,{className:"d-flex flex-column  ",children:[Object(j.jsx)("div",{className:"d-flex justify-content-center",children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(j.jsxs)("div",{className:"d-flex justify-content-center",children:[e.totalPrice,"$"]})]}),Object(j.jsx)(l.a,{className:"btn btn-success",onClick:function(){return i.setBasket(e.id)},disabled:0===e.counterKilo,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})})),p=Object(u.a)((function(){var t=Object(c.useContext)(T).FruitShopStore;return Object(j.jsx)(f.a,{className:"d-flex m-2",children:t.fruits.map((function(t){return Object(j.jsx)(O,{fruit:t},t.id)}))})})),k="/basket",g=[{path:"/",Component:p},{path:k,Component:b}];var _=function(){return Object(j.jsxs)(o.d,{children:[g.map((function(t,e){var i=t.path,c=t.Component;return Object(j.jsx)(o.b,{path:i,component:c,exact:!0},e)})),Object(j.jsx)(o.a,{to:"/"})]})},v=i(71),y=i(72),N=Object(u.a)((function(){var t=Object(o.g)();return Object(j.jsx)(v.a,{bg:"dark",variant:"dark",children:Object(j.jsxs)(x.a,{children:[Object(j.jsx)(r.b,{style:{color:"white"},to:"/",children:"\u041e\u0412\u041e\u0429\u0418\u0411\u0410\u0417\u0410"}),Object(j.jsx)(y.a,{className:"ml-auto",style:{color:"white"},children:Object(j.jsx)(l.a,{variant:"outline-light",className:"ml-2",onClick:function(){return t.push(k)},children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"})})]})})}));var P=function(){return Object(j.jsxs)(r.a,{children:[Object(j.jsx)(N,{}),Object(j.jsx)(_,{})]})},K=i(47),C=i(48),B=i(7),S=i(73),w=function(){function t(){Object(K.a)(this,t),this._fruits=[{id:1,name:"\u0411\u0430\u043d\u0430\u043d",price:10,discount:null,discountWeight:null,img:"https://m.dom-eda.com/uploads/images/catalog/item/7e6fd19d46/0c87fefc9a_100crop.jpg",counterKilo:0,totalPrice:0},{id:2,name:"\u042f\u0431\u043b\u043e\u043a\u043e",price:8,discount:null,discountWeight:null,img:"https://m.dom-eda.com/uploads/images/catalog/item/86df51de21/c25c94fe96_100crop.jpg",counterKilo:0,totalPrice:0},{id:3,name:"\u041f\u0430\u043f\u0430\u044f",price:10,discount:25,discountWeight:3,img:"https://m.dom-eda.com/uploads/images/catalog/item/b230c322da/ea073f8b3b_100crop.jpg",counterKilo:0,totalPrice:0}],this._basket=[],this._totalBasketPrice=0,Object(B.d)(this)}return Object(C.a)(t,[{key:"setTotalBasketPrice",value:function(){var t=0;this._basket.map((function(e){return t+=e.price})),this._totalBasketPrice=t}},{key:"increment",value:function(t){this._fruits[t-1].counterKilo=this._fruits[t-1].counterKilo+1}},{key:"decrement",value:function(t){this._fruits[t-1].counterKilo>0?this._fruits[t-1].counterKilo=this._fruits[t-1].counterKilo-1:this._fruits[t-1].counterKilo=0}},{key:"removeBasketItem",value:function(t){this._basket=this._basket.filter((function(e){return e.id!==t}))}},{key:"setBasket",value:function(t){var e={name:this._fruits[t-1].name,price:this._fruits[t-1].totalPrice,counterKilo:this._fruits[t-1].counterKilo,id:Object(S.a)()};this._basket.push(e),this._fruits[t-1].counterKilo=0,this._fruits[t-1].totalPrice=0}},{key:"setTotalPrice",value:function(t){var e=this._fruits[t-1].price,i=this._fruits[t-1].discount,c=this._fruits[t-1].discountWeight,n=this._fruits[t-1].counterKilo;if(i&&n>=c){var s=Math.floor(n/c)*i,r=n%c*e;this._fruits[t-1].totalPrice=s+r}else this._fruits[t-1].totalPrice=e*n}},{key:"basket",get:function(){return this._basket}},{key:"fruits",get:function(){return this._fruits}},{key:"totalBasketPrice",get:function(){return this._totalBasketPrice}}]),t}(),T=Object(c.createContext)(null);s.a.render(Object(j.jsx)(T.Provider,{value:{FruitShopStore:new w},children:Object(j.jsx)(P,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.870c0247.chunk.js.map