{"version":3,"sources":["pages/Basket.jsx","commponents/FruitItem.jsx","pages/Shop.jsx","utils/const.js","router.jsx","commponents/AppRouter.jsx","commponents/NavBar.jsx","App.js","store/FruitShopStore.js","index.js"],"names":["Basket","observer","FruitShopStore","useContext","Context","useEffect","setTotalBasketPrice","basket","ListGroup","className","style","width","border","map","item","Item","fontSize","name","counterKilo","price","Button","onClick","removeBasketItem","id","totalBasketPrice","FriutItem","fruit","index","setTotalPrice","Card","Image","height","src","img","Container","Title","Subtitle","discount","discountWeight","increment","decrement","totalPrice","setBasket","disabled","Shop","fruits","BASKET_ROUTE","publicRouter","path","Component","AppRouter","i","component","exact","to","NavBar","history","useHistory","Navbar","bg","variant","color","Nav","push","App","this","_fruits","_basket","_totalBasketPrice","makeAutoObservable","indx","currentItem","filter","countKilo","currentPrice","currentDiscount","currentDiscountWeight","Math","floor","currentIndex","findIndex","currentFruitsIndx","currentBasketItem","currentFruitItem","setDiscount","newItem","currentCountKilo","createContext","ReactDOM","render","Provider","value","document","getElementById"],"mappings":"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","file":"static/js/main.a6019ea4.chunk.js","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { Button, ListGroup } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\nimport { Context } from \"..\";\nimport { AiFillDelete } from \"react-icons/ai\";\n\nconst Basket = observer(() => {\n  const { FruitShopStore } = useContext(Context);\n\n  useEffect(() => {\n    FruitShopStore.setTotalBasketPrice();\n  }, [FruitShopStore.basket, FruitShopStore]);\n\n  return (\n    <ListGroup\n      className=\"d-flex justify-content-center m-4\"\n      style={{ width: 300, border: \"1px solid grey\" }}\n    >\n      <h1 className=\"d-flex justify-content-center\">Моя корзина</h1>\n      {FruitShopStore.basket.map((item) => (\n        <ListGroup.Item\n          key={item.id}\n          className=\"d-flex justify-content-between\"\n          style={{ fontSize: \"25px\" }}\n        >\n          {item.name} - {item.counterKilo}кг - {item.price}$\n          <Button\n            className=\"btn btn-light \"\n            onClick={() => FruitShopStore.removeBasketItem(item.id)}\n          >\n            <AiFillDelete></AiFillDelete>\n          </Button>\n        </ListGroup.Item>\n      ))}\n      <Button className=\"btn btn-success\">\n        {\" \"}\n        Купить за {FruitShopStore.totalBasketPrice}$\n      </Button>\n    </ListGroup>\n  );\n});\n\nexport default Basket;\n","import { observer } from \"mobx-react-lite\";\nimport React, { useContext, useEffect } from \"react\";\nimport { Button, Card, Container, Image } from \"react-bootstrap\";\nimport { AiOutlinePlus, AiOutlineMinus } from \"react-icons/ai\";\nimport { Context } from \"..\";\n\nconst FriutItem = observer(({ fruit, index}) => {\n  const { FruitShopStore } = useContext(Context);\n\n  useEffect(() => {\n    FruitShopStore.setTotalPrice(index);\n  }, [fruit.counterKilo, index, FruitShopStore]);\n  return (\n    <Card style={{ width: 155, border: \"1px solid grey\" }} className=\"ml-2\">\n      <Image width={150} height={150} src={fruit.img} />\n      <Container className=\"d-flex flex-column \">\n        <Card.Title className=\"border-top d-flex justify-content-center\">\n          {fruit.name}\n        </Card.Title>\n        <Card.Subtitle className=\"mb-2 pb-2 text-muted  d-flex justify-content-center border-bottom\">\n          {\" \"}\n          {fruit.price} $/кг\n          {fruit.discount\n            ? ` ${fruit.discount} $/${fruit.discountWeight} кг`\n            : null}{\" \"}\n        </Card.Subtitle>\n      </Container>\n      <Card.Title\n        className=\"d-flex justify-content-center border-bottom\"\n        style={{ fontSize: \"30px\" }}\n      >\n        <Button\n          className=\"btn btn-light\"\n          onClick={() => FruitShopStore.increment(index)}\n        >\n          {\" \"}\n          <AiOutlinePlus />\n        </Button>\n        {fruit.counterKilo} кг\n        <Button\n          className=\"btn btn-light\"\n          onClick={() => FruitShopStore.decrement(index)}\n        >\n          {\" \"}\n          <AiOutlineMinus />\n        </Button>\n      </Card.Title>\n      <Card.Title className=\"d-flex flex-column  \">\n        <div className=\"d-flex justify-content-center\">Итого:</div>\n        <div className=\"d-flex justify-content-center\">{fruit.totalPrice}$</div>\n      </Card.Title>\n      <Button\n        className=\"btn btn-success\"\n        onClick={() => FruitShopStore.setBasket(fruit.id)}\n        disabled={fruit.counterKilo === 0 ? true : false}\n      >\n        Добавить в корзину\n      </Button>\n    </Card>\n  );\n});\nexport default FriutItem;\n","import { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { useContext } from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport { Context } from \"..\";\nimport FriutItem from \"../commponents/FruitItem\";\n\nconst Shop = observer(() => {\n  const { FruitShopStore } = useContext(Context);\n  \n  return (\n    <Container className=\"d-flex justify-content-start m-2\">\n      {FruitShopStore.fruits.map((fruit, index) => (\n        <FriutItem key={fruit.id} fruit={fruit} index={index} />\n      ))}\n    </Container>\n  );\n});\n\nexport default Shop;\n","export const SHOP_ROUTE = \"/\";\nexport const BASKET_ROUTE = \"/basket\";\n","\nimport Basket from \"./pages/Basket\";\n\nimport Shop from \"./pages/Shop\";\nimport {\n\n  BASKET_ROUTE,\n  \n  SHOP_ROUTE,\n} from \"./utils/const\";\n\n\n\nexport const publicRouter = [\n  {\n    path: SHOP_ROUTE,\n    Component: Shop,\n  },\n  {\n    path: BASKET_ROUTE,\n    Component: Basket,\n  },\n\n];\n","import React from \"react\";\n\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\nimport { publicRouter } from \"../router\";\nimport { SHOP_ROUTE } from \"../utils/const\";\n\nfunction AppRouter() {\n  \n  return (\n    <Switch>\n      {publicRouter.map(({ path, Component }, i) => (\n        <Route key={i} path={path} component={Component} exact />\n      ))}\n      <Redirect to={SHOP_ROUTE} />\n    </Switch>\n  );\n}\n\nexport default AppRouter;\n","\nimport React from \"react\";\nimport { Container, Nav, Navbar, Button } from \"react-bootstrap\";\nimport { NavLink } from \"react-router-dom\";\nimport { observer } from \"mobx-react-lite\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { BASKET_ROUTE, SHOP_ROUTE } from \"../utils/const\";\n\nconst NavBar = observer(() => {\n  const history = useHistory();\n  return (\n    <Navbar bg=\"dark\" variant=\"dark\">\n      <Container>\n        <NavLink style={{ color: \"white\" }} to={SHOP_ROUTE}>\n          ОВОЩИБАЗА\n        </NavLink>\n\n        <Nav className=\"ml-auto\" style={{ color: \"white\" }}>\n          <Button\n            variant={\"outline-light\"}\n            className=\"ml-2\"\n            onClick={() => history.push(BASKET_ROUTE)}\n            \n          >\n            Корзина\n          </Button>\n        </Nav>\n      </Container>\n    </Navbar>\n  );\n});\nexport default NavBar;\n","import React from \"react\";\n\nimport { BrowserRouter } from \"react-router-dom\";\nimport AppRouter from \"./commponents/AppRouter\";\nimport NavBar from \"./commponents/NavBar\";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <NavBar />\n      <AppRouter />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import { makeAutoObservable } from \"mobx\";\nexport default class FruitShopStore {\n  constructor() {\n    this._fruits = [\n      {\n        id: 1,\n        name: \"Банан\",\n        price: 10,\n        discount: null,\n        discountWeight: null,\n        img:\n          \"https://m.dom-eda.com/uploads/images/catalog/item/7e6fd19d46/0c87fefc9a_100crop.jpg\",\n        counterKilo: 0,\n        totalPrice: 0,\n      },\n      {\n        id: 2,\n        name: \"Яблоко\",\n        price: 8,\n        discount: null,\n        discountWeight: null,\n        img:\n          \"https://m.dom-eda.com/uploads/images/catalog/item/86df51de21/c25c94fe96_100crop.jpg\",\n        counterKilo: 0,\n        totalPrice: 0,\n      },\n      {\n        id: 3,\n        name: \"Папая\",\n        price: 10,\n        discount: 25,\n        discountWeight: 3,\n        img:\n          \"https://m.dom-eda.com/uploads/images/catalog/item/b230c322da/ea073f8b3b_100crop.jpg\",\n        counterKilo: 0,\n        totalPrice: 0,\n      },\n    ];\n\n    this._basket = [];\n\n    this._totalBasketPrice = 0;\n\n    makeAutoObservable(this);\n  }\n\n  setTotalBasketPrice() {\n    let price = 0;\n    this._basket.map((item) => (price = price + item.price));\n    this._totalBasketPrice = price;\n  }\n\n  increment(indx) {\n    const currentItem = this._fruits[indx];\n    currentItem.counterKilo = currentItem.counterKilo + 1;\n  }\n\n  decrement(indx) {\n    const currentItem = this._fruits[indx];\n    if (currentItem.counterKilo > 0) {\n      currentItem.counterKilo = currentItem.counterKilo - 1;\n    } else {\n      currentItem.counterKilo = 0;\n    }\n  }\n\n  removeBasketItem(id) {\n    this._basket = this._basket.filter((item) => item.id !== id);\n  }\n\n  setDiscount(indx, countKilo) {\n    const currentItem = this._fruits[indx];\n    const currentPrice = currentItem.price;\n    const currentDiscount = currentItem.discount;\n    const currentDiscountWeight = currentItem.discountWeight;\n\n    const priceWithDiscount =\n      Math.floor(countKilo / currentDiscountWeight) * currentDiscount;\n    const priceWithoutDiscount =\n      (countKilo % currentDiscountWeight) * currentPrice;\n    return priceWithDiscount + priceWithoutDiscount;\n  }\n\n  setBasket(id) {\n    const currentIndex = this._basket.findIndex((item) => item.id === id);\n    const currentFruitsIndx = id - 1;\n    const currentBasketItem = this._basket[currentIndex];\n    const currentFruitItem = this._fruits[currentFruitsIndx];\n\n    if (currentIndex !== -1) {\n      currentBasketItem.counterKilo =\n        currentBasketItem.counterKilo + currentFruitItem.counterKilo;\n\n      currentBasketItem.price =\n        currentFruitItem.discount &&\n        currentBasketItem.counterKilo >= currentFruitItem.discountWeight\n          ? this.setDiscount(currentFruitsIndx, currentBasketItem.counterKilo)\n          : currentBasketItem.price + currentFruitItem.totalPrice;\n    } else {\n      const newItem = {\n        name: currentFruitItem.name,\n        price: currentFruitItem.totalPrice,\n        counterKilo: currentFruitItem.counterKilo,\n        id: currentFruitItem.id,\n      };\n      this._basket.push(newItem);\n    }\n\n    currentFruitItem.counterKilo = 0;\n    currentFruitItem.totalPrice = 0;\n  }\n\n  setTotalPrice(indx) {\n    const currentItem = this._fruits[indx];\n    const currentPrice = currentItem.price;\n    const currentDiscount = currentItem.discount;\n    const currentDiscountWeight = currentItem.discountWeight;\n    const currentCountKilo = currentItem.counterKilo;\n    if (currentDiscount && currentCountKilo >= currentDiscountWeight) {\n      currentItem.totalPrice = this.setDiscount(indx, currentCountKilo);\n    } else {\n      currentItem.totalPrice = currentPrice * currentCountKilo;\n    }\n  }\n\n  get basket() {\n    return this._basket;\n  }\n\n  get fruits() {\n    return this._fruits;\n  }\n\n  get totalBasketPrice() {\n    return this._totalBasketPrice;\n  }\n}\n","import React, { createContext } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport FruitShopStore from \"./store/FruitShopStore\";\n\n\nexport const Context = createContext(null);\nReactDOM.render(\n  <Context.Provider\n    value={{  FruitShopStore: new FruitShopStore() }}\n  >\n    <App />\n  </Context.Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}